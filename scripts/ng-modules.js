"use strict";!function(){function e(e){return["$rootScope","$window",function(n,o){for(var a,r,t,l=o[e]||(console.warn("This browser does not support Web Storage!"),{}),u={$default:function(e){for(var n in e)angular.isDefined(u[n])||(u[n]=e[n]);return u},$reset:function(e){for(var n in u)"$"===n[0]||delete u[n];return u.$default(e)}},g=0;g<l.length;g++)(t=l.key(g))&&"ngStorage-"===t.slice(0,10)&&(u[t.slice(10)]=angular.fromJson(l.getItem(t)));return a=angular.copy(u),n.$watch(function(){r||(r=setTimeout(function(){if(r=null,!angular.equals(u,a)){angular.forEach(u,function(e,n){angular.isDefined(e)&&"$"!==n[0]&&l.setItem("ngStorage-"+n,angular.toJson(e)),delete a[n]});for(var e in a)l.removeItem("ngStorage-"+e);a=angular.copy(u)}},100))}),"localStorage"===e&&o.addEventListener&&o.addEventListener("storage",function(e){"ngStorage-"===e.key.slice(0,10)&&(e.newValue?u[e.key.slice(10)]=angular.fromJson(e.newValue):delete u[e.key.slice(10)],a=angular.copy(u),n.$apply())}),u}]}angular.module("ngStorage",[]).factory("$localStorage",e("localStorage")).factory("$sessionStorage",e("sessionStorage"))}();
angular.module("mediaPlayer",["mediaPlayer.helpers"]).constant("playerDefaults",{currentTrack:0,ended:void 0,network:void 0,playing:!1,seeking:!1,tracks:0,formatDuration:"00:00",formatTime:"00:00",loadPercent:0}).directive("mediaPlayer",["$rootScope","$interpolate","$timeout","throttle","playerDefaults",function(t,e,n,a,r){function i(t){return function(e,a){var r,i=null;if(t.$attachPlaylist(e),void 0===e&&void 0!==a)return t.pause();if(t.currentTrack){r=a?a[t.currentTrack-1]:-1;for(var o=0;o<e.length;o++)if(angular.equals(e[o],r)){i=o;break}null!==i?(t.currentTrack=i+1,t.tracks=e.length):(t.pause(),e.length?n(function(){t.$clearSourceList(),t.$addSourceList(e[0]),t.load(),t.tracks=e.length}):t.reset())}else e.length?(t.$clearSourceList(),t.$addSourceList(e[0]),t.load(),t.tracks=e.length):t.reset()}}var o={load:function(t,e){"boolean"==typeof t?(e=t,t=null):"object"==typeof t&&(this.$clearSourceList(),this.$addSourceList(t)),this.$domEl.load(),this.ended=void 0,e&&this.$element.one("canplay",this.play.bind(this))},reset:function(t){angular.extend(this,r),this.$clearSourceList(),this.load(this.$playlist,t)},play:function(t){return this.$playlist.length>t?(this.currentTrack=t+1,this.load(this.$playlist[t],!0)):(!this.currentTrack&&this.$domEl.readyState&&this.currentTrack++,void(this.ended?this.load(!0):this.$domEl.play()))},playPause:function(t){"number"==typeof t&&t+1!==this.currentTrack?this.play(t):this.playing?this.pause():this.play()},pause:function(){this.$domEl.pause()},stop:function(){this.reset()},toggleMute:function(){this.muted=this.$domEl.muted=!this.$domEl.muted},next:function(t){var e=this;if(e.currentTrack&&e.currentTrack<e.tracks){var a=t||e.playing;e.pause(),n(function(){e.$clearSourceList(),e.$addSourceList(e.$playlist[e.currentTrack]),e.load(a),e.currentTrack++})}},prev:function(t){var e=this;if(e.currentTrack&&e.currentTrack-1){var a=t||e.playing;e.pause(),n(function(){e.$clearSourceList(),e.$addSourceList(e.$playlist[e.currentTrack-2]),e.load(a),e.currentTrack--})}},setPlaybackRate:function(t){this.$domEl.playbackRate=t},setVolume:function(t){this.$domEl.volume=t},seek:function(t){var e,n=0;if("string"==typeof t)try{e=t.split(":"),n+=parseInt(e.pop(),10),e.length&&(n+=60*parseInt(e.pop(),10)),e.length&&(n+=3600*parseInt(e.pop(),10))}catch(a){}return this.$domEl.fastSeek(t)},on:function(t,e){return this.$element.on(t,e)},off:function(t,e){return this.$element.off(t,e)},one:function(t,e){return this.$element.one(t,e)},$addSourceList:function(t){var e=this;if(angular.isArray(t))angular.forEach(t,function(t){var n=document.createElement("SOURCE");angular.forEach(t,function(t,e){n.setAttribute(e,t)}),e.$element.append(n)});else if(angular.isObject(t)){var n=document.createElement("SOURCE");angular.forEach(t,function(t,e){n.setAttribute(e,t)}),e.$element.append(n)}},$clearSourceList:function(){this.$element.contents().remove()},$formatTime:function(t){if(1/0===t)return"âˆž";var e,n=parseInt(t/3600,10)%24,a=parseInt(t/60,10)%60,r=parseInt(t%60,10),i=(10>a?"0"+a:a)+":"+(10>r?"0"+r:r);return e=n>0?(10>n?"0"+n:n)+":"+i:i},$attachPlaylist:function(t){void 0===t||null===t?this.playlist=[]:this.$playlist=t}},u=function(t,e,n){var r={playing:function(){t.$apply(function(t){t.playing=!0,t.ended=!1})},pause:function(){t.$apply(function(t){t.playing=!1})},ended:function(){t.currentTrack<t.tracks?t.next(!0):t.$apply(function(t){t.ended=!0,t.playing=!1})},timeupdate:a(1e3,!1,function(){t.$apply(function(t){t.currentTime=e.currentTime,t.formatTime=t.$formatTime(t.currentTime)})}),loadedmetadata:function(){t.$apply(function(t){t.currentTrack||t.currentTrack++,t.duration=e.duration,t.formatDuration=t.$formatTime(t.duration),e.buffered.length&&(t.loadPercent=parseInt(e.buffered.end(e.buffered.length-1)/t.duration*100,10))})},progress:function(){t.$domEl.buffered.length&&t.$apply(function(t){t.loadPercent=parseInt(e.buffered.end(e.buffered.length-1)/t.duration*100,10),t.network="progress"})},volumechange:function(){t.$apply(function(t){t.volume=e.volume,t.muted=e.muted})},seeked:function(){t.$apply(function(t){t.seeking=!1})},seeking:function(){t.$apply(function(t){t.seeking=!0})},ratechange:function(){t.$apply(function(t){t.playbackRate=e.playbackRate})},stalled:function(){t.$apply(function(t){t.network="stalled"})},suspend:function(){t.$apply(function(t){t.network="suspend"})}};angular.forEach(r,function(t,e){n.on(e,t)})},l=function(e){var n=angular.extend(t.$new(!0),{$element:e,$domEl:e[0],$playlist:void 0,buffered:e[0].buffered,played:e[0].played,seekable:e[0].seekable},r,o);return u(n,e[0],e),n};return{scope:!1,link:function(t,e,n){var a=n.playlist,r=n.mediaPlayer||n.playerControl,o=new l(e),u=t[a];if(u=void 0===a?[]:void 0===t[a]?t[a]=[]:t[a],void 0!==r&&(t[r]=o),"AUDIO"!==e[0].tagName&&"VIDEO"!==e[0].tagName)return new Error("player directive works only when attached to an <audio>/<video> type tag");var c=[],s=e.find("source");1===s.length?u.unshift({src:s[0].src,type:s[0].type,media:s[0].media}):s.length>1&&(angular.forEach(s,function(t){c.push({src:t.src,type:t.type,media:t.media})}),u.unshift(c)),void 0===a?o.$attachPlaylist(u):u.length?(i(o)(u,void 0,t),t.$watch(a,i(o),!0)):t.$watch(a,i(o),!0),t.$on("$destroy",o.$destroy)}}}]),angular.module("mediaPlayer.helpers",[]).factory("throttle",["$timeout",function(t){return function(e,n,a,r){var i,o=0;"boolean"!=typeof n&&(r=a,a=n,n=void 0);var u=function(){var u=this,l=+new Date-o,c=arguments,s=function(){o=+new Date,a.apply(u,c)},d=function(){i=void 0};r&&!i&&s(),i&&t.cancel(i),void 0===r&&l>e?s():n!==!0&&(i=t(r?d:s,void 0===r?e-l:e))};return u}}]);