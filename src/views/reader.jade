ion-view(title='{{ title }}', right-buttons='rightButtons')
    ion-content(has-header='true', has-footer='true')
        div(ng-switch='progress.status')
            div(ng-switch-default)
                .button-bar.bar-subheader
                    audio(audio-player, player-control='audioPlayer', playlist='playlist', player-name='audioPlayer')
                        | Play
                    //- button.button.button.icon.ion-ios7-rewind(ng-click='audioPlayer.prev()')
                    button.button.button.icon.ion-play(ng-show='!audioPlayer.playing', ng-click='audioPlayer.play()')
                    button.button.button.icon.ion-pause(ng-show='audioPlayer.playing', ng-click='audioPlayer.pause()')
                    //- button.button.button.icon.ion-ios7-fastforward(ng-click='audioPlayer.next()')
                //- TODO: fix index issue
                .item.item-text-wrap
                    span.page(ng-repeat='page in pages')
                        span.aya(ng-repeat='aya in page')
                            h2.sura-name.item.item-divider(ng-if='aya.aya_id == 1'): b {{ aya.sura_name }}
                            span(ng-click='audioPlayer.play({{ aya.index }})', index='{{ aya.index }}')
                                span.aya-text(colorize='{{ options.reader.colorized }}', colorize-text='{{ aya.text }}', ng-class='{ assertive: audioPlayer.currentTrack - 1 == aya.index }')
                                i.aya-number {{ aya.aya_id_display }}

                .item.item-text-wrap(ng-if='view.current < view.total')
                    ion-infinite-scroll(on-infinite='loadMore()', distance='20%', icon='ion-loading-c')

            .card.text-center(ng-switch-when='init')
                .item.item-body
                    i.icon.placeholder-icon.ion-loading-c.icon-large
                    div(ng-if='options.first_time')
                        h2 Indexing databases for the first time...
                        small This may take a few minutes
            
            .card.text-center(ng-switch-when='error')
                .item.item-body
                    i.icon.placeholder-icon.ion-alert-circled.icon-large
                    h2 Something went wrong
                    small {{ error.message }}